<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://xxliud.github.io</id>
    <title>Zcbb - Workspace</title>
    <updated>2020-06-23T12:40:57.676Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://xxliud.github.io"/>
    <link rel="self" href="https://xxliud.github.io/atom.xml"/>
    <subtitle>å¿µå¿µä¸å¿˜ï¼Œå¿…æœ‰å›å“</subtitle>
    <logo>https://xxliud.github.io/images/avatar.png</logo>
    <icon>https://xxliud.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, Zcbb - Workspace</rights>
    <entry>
        <title type="html"><![CDATA[æˆ‘ä»¬ä¸ELKçš„è·ç¦»]]></title>
        <id>https://xxliud.github.io/post/docker-elk/</id>
        <link href="https://xxliud.github.io/post/docker-elk/">
        </link>
        <updated>2020-06-23T12:24:26.000Z</updated>
        <content type="html"><![CDATA[<p><img src="https://xxliud.github.io/post-images/1592915083405.jpg" alt="" loading="lazy"><br>
ELKæ˜¯Elasticsearchã€Logstashã€Kibanaä¸‰å¤§å¼€æºæ¡†æ¶é¦–å­—æ¯å¤§å†™ç®€ç§°ã€‚å¸‚é¢ä¸Šä¹Ÿè¢«æˆä¸ºElastic Stackã€‚å…¶ä¸­Elasticsearchæ˜¯ä¸€ä¸ªåŸºäºLuceneã€åˆ†å¸ƒå¼ã€é€šè¿‡Restfulæ–¹å¼è¿›è¡Œäº¤äº’çš„è¿‘å®æ—¶æœç´¢å¹³å°æ¡†æ¶ã€‚åƒç±»ä¼¼ç™¾åº¦ã€è°·æ­Œè¿™ç§å¤§æ•°æ®å…¨æ–‡æœç´¢å¼•æ“çš„åœºæ™¯éƒ½å¯ä»¥ä½¿ç”¨Elasticsearchä½œä¸ºåº•å±‚æ”¯æŒæ¡†æ¶ï¼Œå¯è§Elasticsearchæä¾›çš„æœç´¢èƒ½åŠ›ç¡®å®å¼ºå¤§,å¸‚é¢ä¸Šå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ç®€ç§°Elasticsearchä¸ºesã€‚Logstashæ˜¯ELKçš„ä¸­å¤®æ•°æ®æµå¼•æ“ï¼Œç”¨äºä»ä¸åŒç›®æ ‡ï¼ˆæ–‡ä»¶/æ•°æ®å­˜å‚¨/MQï¼‰æ”¶é›†çš„ä¸åŒæ ¼å¼æ•°æ®ï¼Œç»è¿‡è¿‡æ»¤åæ”¯æŒè¾“å‡ºåˆ°ä¸åŒç›®çš„åœ°ï¼ˆæ–‡ä»¶/MQ/redis/elasticsearch/kafkaç­‰ï¼‰ã€‚Kibanaå¯ä»¥å°†elasticsearchçš„æ•°æ®é€šè¿‡å‹å¥½çš„é¡µé¢å±•ç¤ºå‡ºæ¥ï¼Œæä¾›å®æ—¶åˆ†æçš„åŠŸèƒ½ã€‚</p>
<p>ä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹dockerä¸‹å¦‚ä½•æ­å»ºelkå¹³å°</p>
<p>æˆ‘ä»¬çš„æ¶æ„å›¾ï¼š<br>
<img src="https://xxliud.github.io/post-images/1592915101615.png" alt="" loading="lazy"></p>
<p>ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨dockerè¿›è¡Œæ­å»º</p>
<ul>
<li>åˆ›å»ºç½‘ç»œ</li>
</ul>
<pre><code class="language-shell">docker network create somenetwork
</code></pre>
<ul>
<li>æ‹‰å–éœ€è¦çš„é•œåƒ</li>
</ul>
<pre><code class="language-shell">docker pull zookeeper:latest   # zk
docker pull wurstmeister/kafka:latest  # kafka
docker pull elasticsearch:6.8.4  # es
docker pull logstash:6.8.4  # logstash
docker pull kibana:6.8.4   #kibana
</code></pre>
<ul>
<li>åˆ›å»ºzk + kafka</li>
</ul>
<pre><code class="language-shell"># zookeeper
docker run -d --name zookeeper \
--publish 2181:2181  zookeeper:latest

# kafka
docker run -d --name kafka --publish 9092:9092 \
--link zookeeper \
--env KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181 \
--env KAFKA_ADVERTISED_HOST_NAME=kafkaæ‰€åœ¨å®¿ä¸»æœºçš„IP \
--env KAFKA_ADVERTISED_PORT=9092 \
--net somenetwork
wurstmeister/kafka:latest


# æµ‹è¯•
docker exec -it kafka /bin/bash
# è¿›å…¥binç›®å½•
cd /opt/kafka_2.25-2.3.0/bin/
# åˆ›å»ºtopic
./kafka-topics.sh --create --zookeeper zookeeper:2181 --replication-factor 1 --partitions 1 --topic elk-kafka-test 
# è¿è¡Œç”Ÿäº§è€…å¹¶æŒ‡å®štopic
./kafka-console-producer.sh --broker-list 127.0.0.1:9092 --topic elk-kafka-test 
# æ–°å¼€çª—å£è¿è¡Œæ¶ˆè´¹è€…ï¼ŒæŒ‡å®šåŒæ ·çš„topicï¼Œ æ³¨æ„æ›¿æ¢kafkaIp
./kafka-console-consumer.sh --bootstrap-server kafkaIp:9092 --topic elk-kafka-test --from-beginning
</code></pre>
<ul>
<li>Elasticsearch å®‰è£…</li>
</ul>
<pre><code class="language-shell">docker run -d --name elasticsearch --net somenetwork -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; elasticsearch:6.8.4
</code></pre>
<p>éªŒè¯ curl http://localhost:9200<br>
<img src="https://xxliud.github.io/post-images/1592915628111.jpg" alt="" loading="lazy"></p>
<ul>
<li>Kibana å®‰è£…</li>
</ul>
<pre><code class="language-shell">docker run -d --name kibana --net somenetwork -p 5601:5601 kibana:6.8.4
</code></pre>
<p>éªŒè¯ æµè§ˆå™¨è®¿é—® http://localhost:5601<br>
<img src="https://xxliud.github.io/post-images/1592915675748.jpg" alt="" loading="lazy"></p>
<ul>
<li>Logstash å®‰è£…<br>
vim vim logstash.conf/logstash.conf</li>
</ul>
<pre><code class="language-shell">input {
   kafka {
     bootstrap_servers =&gt; [&quot;kafka:9092&quot;]
     auto_offset_reset =&gt; &quot;latest&quot;
     consumer_threads =&gt; 5
     decorate_events =&gt; true
     group_id =&gt; &quot;elk&quot;
     topics =&gt; [&quot;elk_kafka_test&quot;]
     type =&gt; &quot;bhy&quot;
     codec =&gt; json {
             charset =&gt; &quot;UTF-8&quot;
     }
   }
}

output {
   stdout {}
   elasticsearch {
     hosts =&gt; [&quot;elasticsearch:9200&quot;]
     index =&gt; &quot;test-elk-%{+YYYY.MM.dd}&quot;
   }
}
</code></pre>
<pre><code class="language-shell">docker run -it -d -p 5044:5044 --name logstash \
--net somenetwork --link kafka --link elasticsearch \
-v c:/usr/share/pipeline logstash:6.8.4
</code></pre>
<ul>
<li>FileBeat é…ç½®ç›‘å¬<br>
ç¼–è¾‘filebeat.yml</li>
</ul>
<pre><code class="language-shell">filebeat.inputs:
- type: log
  enabled: true
  paths:
    - /data/log/*.log
  fields:
    docType: sys-log

output.kafka:
  hosts: [&quot;kafkaIp:9092&quot;]
  topic: &quot;elk_kafka_test&quot;
</code></pre>
<p>å¯åŠ¨filebeat</p>
<pre><code class="language-shell">./filebeat -c filebeat.yml -e
</code></pre>
<p>åœ¨/data/log/ç›®å½•ä¸‹å˜æ›´æ—¥å¿—æ–‡ä»¶ï¼Œfilebeatç›‘å¬åˆ°å˜åŒ–ï¼Œå°†æ—¥å¿—åœ¨kafkaä¸­ç”Ÿäº§å¾…logstashè¿›è¡Œæ¶ˆè´¹ï¼Œåœ¨logstashå®¹å™¨å†…å¯ä»¥çœ‹åˆ°æ—¥å¿—è½¬æ¢æˆjsonæ ¼å¼çš„æ•°æ®å­˜å‚¨åˆ°logstashé‡Œ<br>
<img src="https://xxliud.github.io/post-images/1592915981638.jpg" alt="" loading="lazy"><br>
åœ¨kibanaä¸­æŸ¥çœ‹<br>
<img src="https://xxliud.github.io/post-images/1592915998023.jpg" alt="" loading="lazy"><br>
è‡³æ­¤ELKæ­å»ºå®Œæˆ</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://xxliud.github.io/post/hello-gridea/</id>
        <link href="https://xxliud.github.io/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>Windows</strong>ï¼Œ<strong>MacOS</strong> æˆ– <strong>Linux</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>